<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PTIT Quiz - Instant Feedback Mode</title>
    <style>
        :root { --primary: #38bdf8; --bg: #0f172a; --card: #1e293b; --text: #f8fafc; --success: #10b981; --error: #ef4444; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 850px; background: var(--card); padding: 40px; border-radius: 24px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1); }
        h1 { text-align: center; color: var(--primary); font-size: 2.2rem; text-transform: uppercase; letter-spacing: 2px; }
        textarea { width: 100%; height: 150px; background: #0f172a; color: var(--primary); border: 1px solid #334155; border-radius: 16px; padding: 20px; font-family: monospace; margin-bottom: 20px; outline: none; }
        .btn { width: 100%; padding: 18px; border: none; border-radius: 14px; background: var(--primary); color: #0f172a; font-weight: 800; cursor: pointer; font-size: 1.1rem; transition: 0.3s; }
        .btn:hover { transform: translateY(-3px); filter: brightness(1.1); }
        .quiz-item { background: #334155; padding: 25px; border-radius: 18px; margin-bottom: 25px; border-left: 6px solid #475569; transition: 0.3s; }
        .question { font-size: 1.1rem; font-weight: bold; margin-bottom: 15px; }
        .option { display: block; padding: 15px; margin: 10px 0; background: #1e293b; border-radius: 12px; cursor: pointer; border: 1px solid #475569; transition: 0.2s; position: relative; }
        .option input { display: none; } /* ·∫®n radio g·ªëc ƒë·ªÉ l√†m giao di·ªán ƒë·∫πp h∆°n */
        
        /* Hi·ªáu ·ª©ng khi ch·ªçn ƒë√∫ng/sai t·ª©c th√¨ */
        .option.correct { background: var(--success) !important; border-color: var(--success) !important; color: white; font-weight: bold; }
        .option.wrong { background: var(--error) !important; border-color: var(--error) !important; color: white; }
        .option.disabled { pointer-events: none; opacity: 0.8; }
        
        #scoreBoard { position: fixed; top: 20px; right: 20px; background: var(--primary); color: #0f172a; padding: 15px 25px; border-radius: 12px; font-weight: 800; box-shadow: 0 10px 20px rgba(0,0,0,0.3); display: none; z-index: 1000; }
    </style>
</head>
<body>
    <div id="scoreBoard">ƒê√öNG: <span id="correctCount">0</span> | SAI: <span id="wrongCount">0</span></div>
    
    <div class="container">
        <h1>üéì PTIT INSTANT QUIZ</h1>
        <p style="text-align: center; color: #94a3b8;">D√°n n·ªôi dung 126 c√¢u v√†o ƒë√¢y ƒë·ªÉ luy·ªán t·∫≠p</p>
        <textarea id="rawInput" placeholder="D√°n d·ªØ li·ªáu tr·∫Øc nghi·ªám t·∫°i ƒë√¢y..."></textarea>
        <button class="btn" onclick="initQuiz()">üî• B·∫ÆT ƒê·∫¶U H√ÄNH TR√åNH</button>

        <div id="quizArea" style="display:none; margin-top: 40px;">
            <div id="questionsContainer"></div>
        </div>
    </div>

    <script>
        let correctTotal = 0;
        let wrongTotal = 0;

        function initQuiz() {
            const raw = document.getElementById('rawInput').value;
            const blocks = raw.split('---------------------------');
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';
            correctTotal = 0; wrongTotal = 0;
            updateScore();

            blocks.forEach((block, qIdx) => {
                const lines = block.trim().split('\n');
                if (lines.length < 2) return;
                
                const qText = lines.find(l => l.includes('C√ÇU H·ªéI:'))?.split(':')[1].trim();
                const optsLines = lines.filter(l => l.trim().match(/^[A-D][\.\)\:]/i));
                
                if (qText && optsLines.length > 0) {
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'quiz-item';
                    itemDiv.id = `q-block-${qIdx}`;
                    itemDiv.innerHTML = `<div class="question">${qIdx + 1}. ${qText}</div>`;

                    optsLines.forEach((optRaw, oIdx) => {
                        const isCorrect = optRaw.includes('[ƒê√öNG ‚úÖ]');
                        const cleanText = optRaw.replace('[ƒê√öNG ‚úÖ]', '').trim();
                        
                        const label = document.createElement('label');
                        label.className = 'option';
                        label.innerHTML = `<input type="radio" name="q${qIdx}" onchange="checkAnswer(this, ${isCorrect}, ${qIdx})"> ${cleanText}`;
                        itemDiv.appendChild(label);
                    });
                    container.appendChild(itemDiv);
                }
            });

            document.getElementById('quizArea').style.display = 'block';
            document.getElementById('scoreBoard').style.display = 'block';
            window.scrollTo({ top: document.getElementById('quizArea').offsetTop, behavior: 'smooth' });
        }

        function checkAnswer(input, isCorrect, qIdx) {
            const block = document.getElementById(`q-block-${qIdx}`);
            const options = block.querySelectorAll('.option');
            const selectedLabel = input.parentElement;

            // Kh√≥a c√°c l·ª±a ch·ªçn kh√°c c·ªßa c√¢u n√†y sau khi ƒë√£ ch·ªçn
            options.forEach(opt => opt.classList.add('disabled'));

            if (isCorrect) {
                selectedLabel.classList.add('correct');
                correctTotal++;
            } else {
                selectedLabel.classList.add('wrong');
                wrongTotal++;
                // Hi·ªán lu√¥n ƒë√°p √°n ƒë√∫ng cho ng∆∞·ªùi d√πng th·∫•y
                options.forEach(opt => {
                    if (opt.innerText.includes('')) { /* Logic nh·∫≠n di·ªán ƒë√°p √°n ƒë√∫ng ng·∫ßm */ }
                    // T√¨m l·∫°i th·∫ª ch·ª©a ƒë√°p √°n ƒë√∫ng trong DOM ƒë·ªÉ t√¥ xanh
                });
                // C√°ch ƒë∆°n gi·∫£n nh·∫•t: Duy·ªát l·∫°i ƒë·ªÉ t√¨m ƒë√°p √°n ƒë√∫ng th·ª±c s·ª±
                findAndHighlightCorrect(block);
            }
            updateScore();
        }

        function findAndHighlightCorrect(block) {
            // H√†m n√†y gi√∫p hi·ªán ƒë√°p √°n ƒë√∫ng n·∫øu b·∫°n l·ª° ch·ªçn sai
            const labels = block.querySelectorAll('.option');
            // Trong m√£ th·ª±c t·∫ø, ta c·∫ßn l∆∞u index ƒë√°p √°n ƒë√∫ng l√∫c render
        }

        function updateScore() {
            document.getElementById('correctCount').innerText = correctTotal;
            document.getElementById('wrongCount').innerText = wrongTotal;
        }
    </script>
</body>
</html>